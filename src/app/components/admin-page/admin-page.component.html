<!-- Nav tabs -->
<ul class="nav nav-tabs" role="tablist" id="myTab" style="position:relative">
    <li role="presentation"><a href="#posts" aria-controls="posts" role="tab" data-toggle="tab">Posts</a></li>
    <li role="presentation"><a href="#comments" aria-controls="comments" role="tab" data-toggle="tab">Comments</a></li>
    <li role="presentation" class="active"><a href="#users" aria-controls="users" role="tab" data-toggle="tab">Users</a>
    </li>
    <li class="toggleText" style="position:absolute;right:20px;">Change Theme: <input class="toggle text-center"
            type="checkbox" (click)="change()" /></li>
</ul>


<div class="tab-content">
    <!-- -----------------------------------------  -->
    <!-- -----USERS SECTION OF ADMIN PAGE-----  -->
    <!-- -----------------------------------------  -->
    <div role="tabpanel" class="tab-pane" id="users">
        <div class="test3 col-sm-12">
            <h2 class=" headers text-center">USERS</h2>
            <div class="d-flex justify-content-center searchRow text-center font-weight-bold"
                [ngClass]="{'searchRow': toggle, 'searchRow2': !toggle}">
                <div class="p-2">Search By User Name: <input type="text" [(ngModel)]="searchText2"> </div>
            </div>

            <table class="statsTable table-striped table-hover col-sm-12">
                <thead class="text-center">
                    <tr class="">
                        <th>Active Users</th>
                        <th>Removed Users</th>
                        <th>Total Users</th>
                    </tr>
                </thead>
                <tbody class="statsBody text-center">
                    <ng-container ng-repeat="u in users">
                        <tr class="">
                            <td class="font-weight-bold">{{activeUsers}}</td>
                            <td class="font-weight-bold">{{removedUsers}}</td>
                            <td class="font-weight-bold">{{users.length}}</td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <br>
            <!-- COLLAPSE USER TABLE BUTTON -->
            <button class="btn col-sm-12 collapseBtn" type="button" data-toggle="collapse"
                data-target="#collapseExample3" aria-expanded="false" aria-controls="collapseExample3">Expand/Collapse
                Users Table</button>

            <div class="collapse show" id="collapseExample3">
                <div class="well">
                    <table class="table table-striped table-hover"
                        [ngClass]="{'tablePosts': toggle, 'tablePosts2': !toggle}">
                        <thead class="theadPosts" [ngClass]="{'theadPosts': toggle, 'theadPosts2': !toggle}">
                            <tr class="theadFont" [ngClass]="{'theadFont': toggle, 'theadFont2': !toggle}">
                                <th>User ID</th>
                                <th>Profile ID</th>
                                <th>User Name</th>
                                <th>Email</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>User Role</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor='let u of users | filterUsers : searchText2; let i =index'>
                                <tr *ngIf="u.active == 1" class="dataFont"
                                    [ngClass]="{'dataFont': toggle, 'dataFont2': !toggle}" (click)='rowSelected(i)'
                                    [class.active]='i==selectedRow'>
                                    <td>{{u.userId}}</td>
                                    <td>{{u.profileId}}</td>
                                    <td>{{u.userName}}</td>
                                    <td>{{u.email}}</td>
                                    <td>{{u.fname}}</td>
                                    <td>{{u.lname}}</td>
                                    <td *ngIf="u.userType==2 ; else elseBlock">Admin</td>
                                    <ng-template #elseBlock>
                                        <td>User</td>
                                    </ng-template>
                                    <td><button class='btn-outline-dark' id="remove"
                                            (click)="deleteUser(u.userId)">DELETE
                                            USER</button>
                                    </td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>




    <!-- -----------------------------------------  -->
    <!-- -----POSTS SECTION OF ADMIN PAGE-----  -->
    <!-- -----------------------------------------  -->
    <div role="tabpanel" class="tab-pane active" id="posts">
        <div class="test col-sm-12">
            <h2 class=" headers text-center">POSTS</h2>

            <table class="statsTable table-striped table-hover col-sm-12">
                <thead class="text-center">
                    <tr>
                        <th>Active Posts</th>
                        <th>Removed Posts</th>
                        <th>Total Posts</th>
                    </tr>
                </thead>
                <tbody class="statsBody text-center">

                    <ng-container ng-repeat="p in posts">
                        <tr class="">
                            <td class="font-weight-bold">{{activePosts}}</td>
                            <td class="font-weight-bold">{{removedPosts}}</td>
                            <td class="font-weight-bold">{{posts.length}}</td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <table class="statsTable table-striped table-hover col-sm-12">
                <thead class="text-center">
                    <tr>
                        <th>Posts Today</th>
                        <th>Posts This Week</th>
                        <th>Total This Month</th>
                    </tr>
                </thead>
                <tbody class="statsBody text-center">

                    <ng-container ng-repeat="p in posts">
                        <tr class="">
                            <td class="font-weight-bold">{{postsToday}}</td>
                            <td class="font-weight-bold">{{postsThisWeek}}</td>
                            <td class="font-weight-bold">{{postsThisMonth}}</td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <br>

            <div class="collapse show col-sm-3 text-center font-weight-bold" id="collapseExample"
                style="float:left; padding-top:10px">
                <h3>Reported Posts</h3>
                <div class="p-2" [ngClass]="{'searchRow': toggle, 'searchRow2': !toggle}">Find Post By ID : <input
                        type="number" [(ngModel)]="searchPid"> </div>
                <div class="well">
                    <table class="table table-striped table-hover"
                        [ngClass]="{'tablePosts': toggle, 'tablePosts2': !toggle}">
                        <thead class="theadPosts" [ngClass]="{'theadPosts': toggle, 'theadPosts2': !toggle}">
                            <tr class="theadFont" [ngClass]="{'theadFont': toggle, 'theadFont2': !toggle}">
                                <th>Post ID</th>
                                <th>Times Flagged</th>
                            </tr>
                        </thead>
                        <tbody>

                            <ng-container *ngFor='let fp of flaggedPosts; let i =index'>
                                <tr class="dataFont" [ngClass]="{'dataFont': toggle, 'dataFont2': !toggle}">
                                    <td>{{fp.postId}}</td>
                                    <td>{{fp.flagPost}}</td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </div>


            <div class="collapse show col-sm-9 text-center font-weight-bold" id="collapseExample"
                style="float:right; padding-top:10px">
                <h3>All Posts</h3>
                <div class="filler" [ngClass]="{'filler': toggle, 'filler2': !toggle}">
                    <div class="p-2" [ngClass]="{'searchRow': toggle, 'searchRow2': !toggle}" style="float:left">Search
                        By
                        Post Creator: <input type="text" [(ngModel)]="searchText4"> </div>
                    <div class="p-2" [ngClass]="{'searchRow': toggle, 'searchRow2': !toggle}" style="float:right">Search
                        By
                        Post Content: <input type="text" [(ngModel)]="searchPcontent"></div>
                    <div class="p-2" [ngClass]="{'searchRow': toggle, 'searchRow2': !toggle}" style="float:right">Search
                        By
                        Post Header: <input type="text" [(ngModel)]="searchText3"></div>
                    <div class="well">

                        <table class="table table-striped table-hover"
                            [ngClass]="{'tablePosts': toggle, 'tablePosts2': !toggle}">
                            <thead class="theadPosts" [ngClass]="{'theadPosts': toggle, 'theadPosts2': !toggle}">
                                <tr class="theadFont" [ngClass]="{'theadFont': toggle, 'theadFont2': !toggle}">
                                    <th>User Name</th>
                                    <th>Post Header</th>
                                    <th>Post Content</th>
                                    <th>Date</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>

                                <ng-container
                                    *ngFor='let p of posts | filterHeaders : searchText3 | filterPostContent : searchPcontent | filterPostUser : searchText4 | filterPostID : searchPid; let i =index'>
                                    <tr *ngIf="p.active == 1" class="dataFont"
                                        [ngClass]="{'dataFont': toggle, 'dataFont2': !toggle}">
                                        <td>{{p.userName}}</td>
                                        <td>{{p.postHeader}}</td>
                                        <td>{{p.postContent}}</td>
                                        <td>{{p.postDate}}</td>
                                        <td><button class='btn-outline-dark btn-sm' id="remove"
                                                (click)="deletePost(p.postId)" (click)="releasePost(p.postId)">DELETE
                                                POST</button>
                                            <button class='btn-outline-dark btn-sm' id="release"
                                                ng-click="releasePost(p.postId)" (click)="releasePost(p.postId)">ALLOW
                                                CONTENT</button>
                                        </td>

                                    </tr>
                                </ng-container>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- -----------------------------------------  -->
    <!-- -----COMMENTS SECTION OF ADMIN PAGE-----  -->
    <!-- -----------------------------------------  -->
    <div role="tabpanel" class="tab-pane" id="comments">
        <div class="test2 col-sm-12">
            <h2 class="headers text-center">COMMENTS</h2>
            <div class="d-flex searchRow text-center font-weight-bold"
                [ngClass]="{'searchRow': toggle, 'searchRow2': !toggle}">
                <div class="p-2">Search By Comments User: <input type="text" [(ngModel)]="searchText2"></div>
                <div class="p-2">Search By Comments Content: <input type="text" [(ngModel)]="searchText"></div>
            </div>

            <!--  COMMENTS STATS TABLE -->
            <table class="statsTable table-striped table-hover col-sm-12">
                <thead class="text-center">
                    <tr class="">
                        <th>Active Comments</th>
                        <th>Removed Comments</th>
                        <th>Total Comments</th>
                    </tr>
                </thead>
                <tbody class="statsBody text-center">
                    <ng-container ng-repeat="c in comments">
                        <tr class="">
                            <td class="font-weight-bold">{{activeComments}}</td>
                            <td class="font-weight-bold">{{removedComments}}</td>
                            <td class="font-weight-bold">{{comments.length}}</td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <!--  COMMENTS STATS TABLE -->
            <table class="statsTable table-striped table-hover col-sm-12">
                <thead class="text-center">
                    <tr>
                        <th>Comments Today</th>
                        <th>Comments This Week</th>
                        <th>Comments This Month</th>
                    </tr>
                </thead>
                <tbody class="statsBody text-center">

                    <ng-container ng-repeat="c in comments">
                        <tr class="">
                            <td class="font-weight-bold">{{commentsToday}}</td>
                            <td class="font-weight-bold">{{commentsThisWeek}}</td>
                            <td class="font-weight-bold">{{commentsThisMonth}}</td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>

            <br>
            <!-- COLLAPSE COMMENTS TABLE BUTTON -->
            <button class="btn btn-light col-sm-12 collapseBtn" type="button" data-toggle="collapse"
                data-target="#collapseExample2" aria-expanded="false" aria-controls="collapseExample">Expand/Collapse
                Comments Table</button>

            <div class="collapse show" id="collapseExample2">
                <div class="well">
                    <table class="table table-striped table-hover"
                        [ngClass]="{'tablePosts': toggle, 'tablePosts2': !toggle}">
                        <thead class="theadPosts" [ngClass]="{'theadPosts': toggle, 'theadPosts2': !toggle}">
                            <tr class="theadFont" [ngClass]="{'theadFont': toggle, 'theadFont2': !toggle}">
                                <th>User Name</th>
                                <th>Comment Date</th>
                                <th>Content</th>
                                <th>Post ID</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container
                                *ngFor='let c of comments | filterComments : searchText | filterUsers : searchText2; let i =index'>
                                <tr *ngIf="c.active == 1" class="dataFont"
                                    [ngClass]="{'dataFont': toggle, 'dataFont2': !toggle}" (click)='rowSelected(i)'
                                    [class.active]='i==selectedRow'>
                                    <td>{{c.userName}}</td>
                                    <td>{{c.commentDate}}</td>
                                    <td>{{c.content}}</td>
                                    <td>{{c.postId}}</td>
                                    <td><button class='btn-outline-dark' id="remove"
                                            (click)="deleteComment(c.commentID)">DELETE
                                            COMMENT</button></td>
                                </tr>
                            </ng-container>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>